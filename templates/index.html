{% extends "base.html" %}

{% block content %}
<div class="min-h-full">
    <!-- Landing content wrapper - gets replaced when search happens -->
    <div id="results">
        <!-- Header -->
        <header class="bg-white border-b border-slate-200">
            <div class="max-w-5xl mx-auto px-4 py-4">
                <div class="flex items-center justify-between">
                    <a href="/" class="text-xl font-bold text-slate-900 tracking-tight">
                        EconStats
                    </a>
                    <span class="text-sm text-slate-500">U.S. Economic Data</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="max-w-5xl mx-auto px-4 py-8">
            <!-- Hero Section -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-slate-900 mb-3 tracking-tight">
                    Economic Data with Context
                </h1>
                <p class="text-lg text-slate-500 max-w-2xl mx-auto">
                    Ask questions in plain English. We'll leverage AI to answer with official data and explanations.
                </p>
            </div>

            <!-- Search Form -->
            <form
                action="/search"
                method="post"
                hx-post="/search"
                hx-target="#results"
                hx-swap="innerHTML"
                hx-indicator="#search-box"
                class="max-w-2xl mx-auto mb-8"
            >
                <div id="search-box" class="relative">
                    <input
                        type="text"
                        name="query"
                        placeholder="Ask about the economy..."
                        autocomplete="off"
                        required
                        class="w-full px-5 py-4 pr-14 text-lg bg-white border border-slate-300 rounded-2xl shadow-sm
                               focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
                               placeholder:text-slate-400 transition-shadow"
                    >
                    <!-- Search icon / Loading indicator -->
                    <button type="submit" class="absolute right-4 top-1/2 -translate-y-1/2 cursor-pointer hover:opacity-70 transition-opacity">
                        <svg class="search-icon w-6 h-6 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                        <div class="loading-indicator hidden items-center justify-center">
                            <svg class="animate-spin w-6 h-6 text-primary-500" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"/>
                                <path class="opacity-75" fill="currentColor"
                                      d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"/>
                            </svg>
                        </div>
                    </button>
                </div>
            </form>

            <!-- Quick Buttons -->
            <div class="flex flex-wrap justify-center gap-3 mb-10">
                {% for label, query in [('Jobs', 'job market'), ('Inflation', 'inflation'), ('GDP', 'gdp growth'), ('Rates', 'interest rates'), ('Recession?', 'are we in a recession')] %}
                <button
                    hx-post="/search"
                    hx-vals='{"query": "{{ query }}"}'
                    hx-target="#results"
                    hx-swap="innerHTML"
                    hx-indicator="#search-box"
                    class="px-5 py-2.5 bg-white border border-slate-200 rounded-full text-sm font-medium text-slate-600
                           hover:border-primary-500 hover:text-primary-600 hover:shadow-md
                           transition-all duration-200 cursor-pointer"
                >
                    {{ label }}
                </button>
                {% endfor %}
            </div>

            <!-- Example Queries -->
            <div class="max-w-2xl mx-auto">
                <p class="text-sm font-medium text-slate-500 uppercase tracking-wide mb-4 text-center">
                    Try these questions
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    {% for example in examples %}
                    <button
                        hx-post="/search"
                        hx-vals='{"query": "{{ example }}"}'
                        hx-target="#results"
                        hx-swap="innerHTML"
                        hx-indicator="#search-box"
                        class="p-4 bg-white border border-slate-200 rounded-xl text-left text-slate-600
                               hover:border-primary-300 hover:bg-primary-50 hover:text-primary-700
                               transition-all duration-200 cursor-pointer group"
                    >
                        <span class="group-hover:translate-x-1 inline-block transition-transform">
                            {{ example }}
                        </span>
                    </button>
                    {% endfor %}
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="mt-16 py-8 border-t border-slate-200 bg-white">
            <div class="max-w-5xl mx-auto px-4 text-center text-sm text-slate-500">
                <a href="/about" class="text-primary-600 hover:underline">About EconStats</a>
            </div>
        </footer>
    </div>
</div>
{% endblock %}
